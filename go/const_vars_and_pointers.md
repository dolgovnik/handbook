[[../index.md|<--Go Back]]

# = Constants Vars and Pointers =

## == Constants ==

Константа - это имя для определенного значения, применяется для удобства использования

* __Типизированные__
        `const price float32 = 275.0`

* __Нетипизированные__ - говорим компилятору, что он должен быть более гибким в отношении типа при создании константы - компилятор преобразует значение если это можно
        `const quantity = 2`
  __Литеральные значения__ - это __нетипизированные константы__. Компилятор видя литеральное значение определяет его тип и использует дальше.

## == Vars ==

Пример:
<ключевое слово> <имя> <тип> = <значение>
`var price float32 = 275.0`

__Тип__ можно пропустить, тогда компилятор выведет тип из переданного значения
Значение можно пропустить, но тогда должен быть указан тип. В этом случае, переменной присваивается нулевое значение для указанного типа.
Можно определить несколько переменных с помощью одного оператора __var__

### === Vars Short Syntax ===

!!! __Можно использовать только внутри функций__
Пример:
```
price := 275.00
price, tax, inStock := 275.00, 27.50, true
```

Компилятор выводит типы из переданных значений

!!! __Позволяет переопределять переменные__
Так нельзя:
```
var a, b = 12, 33
var a, c = 45, 55
```

А так можно - важно, чтобы хотя бы одна переменная не существовала и чтобы тип не изменялся.
```
var a, b := 12, 33
var a, c := 45, 55
```

### === Empty Vars ===
Нельзя создать переменную и не использовать ее - компилятор будет ругаться.
Для таких ситуаций можно использовать пустой идентификатор - `'_'`
Пустой идентификатор пригодится, если надо проигнорировать часть значений которые возвращает функция

Пример:
```
package main

import "fmt"

func main(){
    price, _ = 275.00, false
	var _ = "Alice"
	fmt.Println("Price:", price)
}
```

## == Pointers ==
Каждая __переменная__ - это ссылка на отдельную ячейку памяти, в которой хранится ее значение

__Указатель__ - это переменная, значением которой является адрес в памяти, по которому хранится значение с определенным типом.
```
package main

import "fmt"

func main(){
    first := 100
	var second *int = &first
	
	first++
	
	fmt.Println("First:", first)
	fmt.Println("Second:", second)
}
```
Результат выполнения:
`First: 101`
`Second: 0xc000124010`  - значение переменной `second` - это адрес в памяти, который используется для хранения переменной `first`

`*int` - это __тип указателя__, он основан на __типе переменной__ из которой он создан. 
Т.е. `second` - это __переменная__, значением которой является __адрес в памяти__ по которому хранится значение типа __int__

__Следование указателю__ - чтение значения по адресу памяти, на который указывает указатель - это делается с помощью символа `*`
```
package main

import "fmt"

func main(){
    first := 100
	var second *int = &first
	
	first++
	
	fmt.Println("First:", first)
	fmt.Println("Second:", *second)    // <-- следование указателю
}
```
Результат выполнения:
`First: 101`
`Second: 101` - следуем указателю, т.е. читаем значение в ячейке с адресом, который хранится в second. В этой ячейке хранится значение `first = 101`

Указатель можно присвоить другой переменной:

`var myNewPointer *int` - новая переменная с типом `*int` - указатель указывающий на int
`myNewPointer  = second` - присвоеное значения
`*myNewPointer++` - следование указателю, изменение значения в ячейке

### === Нулевое значение указателя ===
Указатель, который определен, но не имеет _нормального_ значения, по умолчанию имеют _нулевое_ значение __nil__
```
package main

import "fmt"

func main() {
    first := 100
	var second *int
	
	fmt.Println(second)
	second = &first
	fmt.Println(second)
}
```
Результат выполнения:
```
<nil>
0xc000010088
```

!!! Следование нулевому указателю завершится ошибкой - __runtime error__

### === Указатели на указатели ===
Указатели могут хранить адреса, по которым хранятся другие указатели
```
package main

import "fmt"

func main() {
    first := 100
	second := &first
	third := &second
	
	fmt.Println(first)
	fmt.Println(*second)
	fmt.Println(**third)
}
```
Результат выполнения:
```
100
100
100
```

### === Польза указателей ===
!!! Указатели позволяют выбирать между передачей значения и передачей ссылки


## == Sensetive shit ==
- Отсутствие типа для переменных обрабатывается не так как для констант. Для переменных не позволяется смешивать типы, даже если их можно преобразовать.
- Go не поддерживает арифметику указателей
